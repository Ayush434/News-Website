{% extends "layout.html" %}

{% block title %}
    Subscribe
{% endblock %}

{% block main %}

        <h3 id="change" style= "color: red">{{ message }}</h3>
        <form action="/subscribe" onsubmit="return validate()" method="post">
            <h1 style="color:green">Subscribe</h1>
            <p class="hint-text">Create your account. It's free and only takes a minute.</p>
            <div class="form-group">
                <input id="username" autocomplete="off" autofocus class="form-control" name="username" placeholder="Username" type="text" required="required">
            </div>
            <div class="form-group">
                <input id="email" autocomplete="off" autofocus class="form-control" name="email" placeholder="email" type="email" required="required">
            </div>
            <div class="form-group">
                <input id="password" class="form-control" name="password" placeholder="Password" type="password" required="required">
            </div>
            <div class="form-group">
                <input id="confirmation" class="form-control" name="confirmation" placeholder="Confirmation" type="password" required="required">
            </div>
            <p>Already subscribed? Login <a href="/login">Here</a></p>
            <button class="btn btn-success" type="submit">Subscribe</button>

        </form>

        <script>
            function validate(){

                let username = document.querySelector('#username').value;
                let password = document.querySelector('#password').value;
                let email = document.querySelector('#email').value;
                let confirmation = document.querySelector('#confirmation').value;

                console.log(confirmation);
                console.log(password);

                if(username == "" || email == "" || password == "" || confirmation == ""){
                change.innerHTML = "All the fields are required to register";
                return false;
                }

                else if(!/^[0-9a-zA-Z]*$/g.test(username)){
                    change.innerHTML = "Username should only contain alphabetical characters";
                    return false;
                }

                else if(password != confirmation){
                    change.innerHTML = "Passwords don't match";
                    return false;
                }

                else if(username.length > 10){
                    change.innerHTML = "Username should be less than 11 characters";
                    return false;
                }

                else if(password.length > 21){
                    change.innerHTML = "Password should be less than 21 characters";
                    return false;
                }
                    return true;
            }
        </script>
{% endblock %}
